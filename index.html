<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>比特币定投（DCA）魅力展示 · 2017-01-01 — 2025-11-01</title>
  <meta name="description" content="围绕比特币定投（Dollar-Cost Averaging, DCA）的可视化：聚焦长期定投的简单与强大，只需设定日期区间、频率与金额，即可直观看到‘时间 × 纪律 × 分散买入’带来的力量（覆盖 2017-01-01 至 2025-11-01）。" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net"/>
  <link rel="stylesheet" href="./styles/main.css" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='48' fill='%232563eb'/><text x='50' y='60' text-anchor='middle' font-size='60' fill='white'>₿</text></svg>">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1 class="brand">比特币定投（DCA）魅力展示</h1>
      <p class="subtitle">用数据说话：长期投资 · 数据区间：2017-01-01 — 2025-11-01</p>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-copy">
        <h2>定投的力量，来自“时间 × 纪律 × 分散买入”</h2>
        <p>
          定投（Dollar-Cost Averaging, DCA）是一种简单但强大的投资方式：
          在固定的时间间隔里，以固定金额持续买入，不用预测价格，也不为短期波动所扰。
          在高波动资产（如比特币）上，定投能有效摊薄成本，降低择时失误风险，从而提高长期胜率。
        </p>
        <p class="disclaimer">数据仅为历史回测演示，不构成投资建议。加密资产波动极大，谨慎参与。</p>
      </div>
      <div class="hero-card">
        <div class="card">
          <h3>回测参数</h3>
          <div class="grid2">
            <label>起始日期
              <input id="startDate" type="date" />
            </label>
            <label>结束日期
              <input id="endDate" type="date" />
            </label>
            <label>定投频率
              <select id="frequency">
                <option value="weekly">每周</option>
                <option value="monthly">每月</option>
                <option value="daily">每天</option>
              </select>
            </label>
            <label>每期投入（USD）
              <input id="amount" type="number" min="1" step="1" value="100" />
            </label>
            <label>阶段粒度
              <select id="stageGranularity">
                <option value="year">按年</option>
                <option value="quarter">按季度</option>
              </select>
            </label>
          </div>
          <div class="presets">
            预设：
            <button data-preset="100w">$100/周</button>
            <button data-preset="50w">$50/周</button>
            <button data-preset="500w">$500/周</button>
          </div>
          <div class="actions">
            <button id="runBacktest">计算图表</button>
          </div>
        </div>
      </div>
    </section>

    <section class="panels">
      <div class="panel">
        <h3>价格与买点</h3>
        <canvas id="priceChart" height="120"></canvas>
      </div>
      <div class="panel">
        <h3>组合价值（DCA）</h3>
        <canvas id="valueChart" height="120"></canvas>
      </div>
      <div class="panel">
        <h3>组合最大回撤</h3>
        <canvas id="ddChart" height="100"></canvas>
      </div>
      <div class="panel">
        <h3>投入 vs. 价值</h3>
        <canvas id="contribChart" height="100"></canvas>
      </div>
      <div class="panel">
        <h3>阶段收益率（DCA）</h3>
        <canvas id="stageChart" height="110"></canvas>
      </div>
    </section>

    <section class="metrics">
      <div class="metric-card">
        <h4>DCA 定投（核心指标）</h4>
        <ul id="metrics-dca"></ul>
      </div>
    </section>

    <section class="data-table">
      <h3>定投买入记录</h3>
      <div class="table-wrap">
        <table id="dcaTable">
          <thead>
            <tr>
              <th>日期</th>
              <th>价格</th>
              <th>当期投入</th>
              <th>买入数量</th>
              <th>累计投入</th>
              <th>累计持有</th>
              <th>组合价值</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="explainer">
      <h3>为什么长期定投，胜率更高？</h3>
      <ul>
        <li>不用预测短期涨跌：价格高时买入份额少，价格低时买入份额多，自动摊薄成本。</li>
        <li>面对黑天鹅和大回撤，持续买入能“逆向增持”，把波动转化为长期复利的朋友。</li>
        <li>通过“价格与买点”“组合价值”“最大回撤”等图表，直观看到纪律与时间的作用。</li>
      </ul>
      <h3>阅读图表的小技巧</h3>
      <ul>
        <li>在“价格与买点”图上，放大到具体阶段，观察定投如何在下跌期显著增加持币数量。</li>
        <li>查看“组合最大回撤”，理解长期持有与持续买入在糟糕行情中的体验差异。</li>
        <li>关注 CAGR 与回撤、波动的组合，综合评估风险调整后的表现。</li>
      </ul>
      <p class="disclaimer small">注：回测假设无手续费与滑点，仅为教育展示，实际结果会受交易成本、税费、实现路径等影响。</p>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>数据源：<code>public/btc-price.csv</code>（2017-01-01 至 2025-11-01），单位 USD</p>
      <p>© 2025 DCA Strategy Lab · 本页不构成投资建议</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0"></script>
  <script src="./scripts/app.js"></script>
</body>
</html>
